# PM 项目功能测试清单

## 📋 测试日期
- 日期: 2026-02-28
- 重构状态: 完成

---

## ✅ PL.vue (项目列表页面)

### 基本功能
- [ ] 页面正常加载，显示项目列表
- [ ] 点击"创建新项目"按钮打开对话框
- [ ] 输入项目名称和描述，点击创建
- [ ] 创建成功后显示 Toast 成功消息
- [ ] 新项目出现在列表中
- [ ] 项目卡片显示仓庽数量

### 项目操作
- [ ] 点击项目卡片，跳转到项目详情页 (PD.vue)
- [ ] 点击编辑按钮，打开编辑对话框
- [ ] 修改项目名称，保存成功
- [ ] 点击删除按钮，显示确认对话框
- [ ] 确认删除，项目从列表中移除

### 搜索功能
- [ ] 在搜索框输入关键字
- [ ] 项目列表实时过滤显示匹配结果

---

## ✅ PD.vue (项目详情页面)

### 基本功能
- [ ] 从 PL.vue 点击项目后正常进入
- [ ] 显示项目名称和描述
- [ ] 显示仓库列表（网格布局）

### 添加仓库 - 本地路径模式
- [ ] 点击"添加仓库"按钮
- [ ] 选择"本地路径"模式
- [ ] 点击选择文件夹按钮
- [ ] 选择包含 .git 或 .svn 的目录
- [ ] 自动检测 VCS 类型（显示 Git/SVN 标签）
- [ ] 输入仓库名称
- [ ] 点击添加，仓库出现在列表中
- [ ] 显示添加成功的 Toast 消息

### 添加仓库 - URL 克隆模式
- [ ] 选择"URL 克隆"模式
- [ ] 输入 Git URL（如 https://github.com/xxx/xxx.git）
- [ ] 自动检测 VCS 类型为 Git
- [ ] 自动从 URL 提取仓库名称
- [ ] 选择克隆目标路径
- [ ] 点击克隆，显示克隆进度
- [ ] 克隆成功后仓库出现在列表中
- [ ] 显示克隆成功的 Toast 消息

### 仓库操作
- [ ] 点击仓库卡片，跳转到仓库详情页 (RD.vue)
- [ ] 点击 VSCode 图标，在 VSCode 中打开
- [ ] 点击文件夹图标，在文件管理器中打开
- [ ] 点击编辑图标，修改仓库名称
- [ ] 点击删除图标，删除仓库

### Git 状态显示
- [ ] Git 仓库显示分支名称
- [ ] Git 仓库显示工作区状态（干净/有修改）
- [ ] Git 仓库显示最新提交 hash

### SVN 状态显示
- [ ] SVN 仓库显示版本号
- [ ] SVN 仓库显示工作区状态
- [ ] SVN 仓库显示作者和日期

### 批量操作
- [ ] 点击"全部拉取"按钮
- [ ] 所有 Git 仓库执行 pull 操作
- [ ] 所有 SVN 仓库执行 update 操作
- [ ] 显示批量操作结果（成功/失败统计）
- [ ] 点击"全部推送"按钮（仅 Git 仓库）
- [ ] 所有 Git 仓库执行 push 操作

---

## ✅ RD.vue (仓库详情页面)

### 基本功能
- [ ] 从 PD.vue 点击仓库后正常进入
- [ ] 显示仓库名称和路径
- [ ] 显示 VCS 类型图标

### 状态显示
- [ ] Git 仓库：显示分支、状态、提交 hash
- [ ] SVN 仓库：显示版本、状态、作者、日期

### 快捷操作
- [ ] 点击"拉取"按钮，执行 pull/update
- [ ] 显示成功/失败 Toast 消息
- [ ] 状态实时刷新

- [ ] 点击"推送"按钮（仅 Git）
- [ ] 显示成功/失败 Toast 消息

- [ ] 点击"提交"按钮，打开提交对话框
- [ ] 输入提交消息
- [ ] 点击提交，执行 commit
- [ ] 显示成功/失败 Toast 消息
- [ ] 对话框关闭，状态刷新

### 其他功能
- [ ] 点击"查看差异"按钮
- [ ] 显示 diff 对话框
- [ ] 显示文件变更内容

- [ ] 点击"打开终端"按钮
- [ ] 在仓库路径打开终端

- [ ] 点击"用 VSCode 打开"按钮
- [ ] 在 VSCode 中打开仓库

- [ ] 点击"复制路径"按钮
- [ ] 路径复制到剪贴板

- [ ] 点击"编辑名称"按钮
- [ ] 修改仓库名称
- [ ] 保存成功，名称更新

### 事件处理
- [ ] 在 RD.vue 打开时删除项目
- [ ] 自动返回首页
- [ ] 显示项目已删除的提示

- [ ] 在 RD.vue 打开时删除仓库
- [ ] 自动返回项目详情页
- [ ] 显示仓库已删除的提示

---

## 🎯 验证重点

### Toast 消息
- [ ] 所有操作的成功消息使用新的 `toast.showSuccess()`
- [ ] 所有操作失败消息使用新的 `toast.showError()` 或 `toast.operationFailed()`
- [ ] 预设消息（如 `toast.createSuccess()`）正常工作

### 数据库操作
- [ ] 创建项目使用 `db.project.create()`
- [ ] 查询项目使用 `db.project.findById()` 等
- [ ] 创建仓库使用 `db.repository.create()`
- [ ] 删除仓库使用 `db.repository.delete()`
- [ ] 不再出现 `db.select()` 或 `db.execute()` 直接调用

### VCS 操作
- [ ] Git 操作使用 `vcs.pull()`, `vcs.push()`, `vcs.commit()`
- [ ] SVN 操作使用相同的接口
- [ ] 不再出现 `gitApi` 或 `svnApi` 直接调用

### 常量使用
- [ ] VCS 类型使用 `VCS_TYPES` 常量
- [ ] 消息文本使用 `MESSAGES` 常量
- [ ] VCS 标签使用 `getVcsLabel()` 函数

---

## 🐛 已知问题

### npm 警告
- ⚠️ npm error: Class extends value undefined is not a constructor or null
- 影响: 无实际影响，项目正常运行
- 原因: npm 配置问题，非代码问题

---

## 📊 测试结果

| 组件 | 状态 | 备注 |
|------|------|------|
| PL.vue | ⏳ 待测试 | |
| PD.vue | ⏳ 待测试 | |
| RD.vue | ⏳ 待测试 | |

---

## ✅ 完成标准

- [ ] 所有基本功能正常工作
- [ ] 所有 Toast 消息正确显示
- [ ] 数据库操作无错误
- [ ] VCS 操作无错误
- [ ] 没有控制台错误或警告
- [ ] 页面导航正常
- [ ] 事件处理正常

---

## 📝 测试笔记

请在此记录测试过程中发现的问题和解决方案。
